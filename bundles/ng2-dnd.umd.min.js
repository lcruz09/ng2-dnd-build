!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/forms"],t):t(e["ng2-dnd"]={},e.ng.core,e.ng.forms)}(this,function(e,t,r){"use strict";function a(e){return"string"==typeof e}function o(e){return e!==undefined&&null!==e}function n(){return new e.DragDropService}function i(t){return new e.DragDropSortableService(t)}var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function a(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),l=function(){return function(e){this.name=e}}();l.COPY=new l("copy"),l.LINK=new l("link"),l.MOVE=new l("move"),l.NONE=new l("none");var p=function(){return function(e,t,r){if(void 0===t&&(t=0),void 0===r&&(r=0),this.imageElement=e,this.x_offset=t,this.y_offset=r,a(this.imageElement)){var o=this.imageElement;this.imageElement=new HTMLImageElement,this.imageElement.src=o}}}(),c=function(){return function(){this.onDragStartClass="dnd-drag-start",this.onDragEnterClass="dnd-drag-enter",this.onDragOverClass="dnd-drag-over",this.onSortableDragClass="dnd-sortable-drag",this.dragEffect=l.MOVE,this.dropEffect=l.MOVE,this.dragCursor="move",this.defaultCursor="pointer"}}(),d=this&&this.__decorate||function(e,t,r,a){var o,n=arguments.length,i=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(n<3?o(i):n>3?o(t,r,i):o(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i},g=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){return function(){}}(),b=function(){return function(){}}();e.DragDropService=function(){return function(){this.allowedDropZones=[]}}(),e.DragDropService=d([t.Injectable()],e.DragDropService),e.DragDropSortableService=function(){function e(e){this._config=e,this.revertData=new b}return Object.defineProperty(e.prototype,"elem",{get:function(){return this._elem},enumerable:!0,configurable:!0}),e.prototype.markSortable=function(e){o(this._elem)&&this._elem.classList.remove(this._config.onSortableDragClass),o(e)&&(this._elem=e,this._elem.classList.add(this._config.onSortableDragClass))},e}(),e.DragDropSortableService=d([t.Injectable(),g("design:paramtypes",[c])],e.DragDropSortableService);var D=this&&this.__decorate||function(e,t,r,a){var o,n=arguments.length,i=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(n<3?o(i):n>3?o(t,r,i):o(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.AbstractComponent=function(){function e(e,t,r,n){var i=this;this._dragDropService=t,this._config=r,this._cdr=n,this._dragEnabled=!1,this.dropEnabled=!1,this.dropZones=[],this.cloneItem=!1,this._defaultCursor=r.defaultCursor,this._elem=e.nativeElement,this._elem.style.cursor=this._defaultCursor,this._elem.ondragenter=function(e){i._onDragEnter(e)},this._elem.ondragover=function(e){return i._onDragOver(e),null!=e.dataTransfer&&(e.dataTransfer.dropEffect=i._config.dropEffect.name),!1},this._elem.ondragleave=function(e){i._onDragLeave(e)},this._elem.ondrop=function(e){i._onDrop(e)},this._elem.onmousedown=function(e){i._target=e.target},this._elem.ondragstart=function(e){if(!i._dragHandle||i._dragHandle.contains(i._target)){if(i._onDragStart(e),null!=e.dataTransfer){if(e.dataTransfer.setData("text",""),e.dataTransfer.effectAllowed=i.effectAllowed||i._config.dragEffect.name,o(i.dragImage))if(a(i.dragImage))e.dataTransfer.setDragImage(function(e){var t=new HTMLImageElement;return t.src=e,t}(i.dragImage));else if(function(e){return"function"==typeof e}(i.dragImage))e.dataTransfer.setDragImage(function(e){return e()}(i.dragImage));else{var t=i.dragImage;e.dataTransfer.setDragImage(t.imageElement,t.x_offset,t.y_offset)}else if(o(i._config.dragImage)){var r=i._config.dragImage;e.dataTransfer.setDragImage(r.imageElement,r.x_offset,r.y_offset)}else i.cloneItem&&(i._dragHelper=i._elem.cloneNode(!0),i._dragHelper.classList.add("dnd-drag-item"),i._dragHelper.style.position="absolute",i._dragHelper.style.top="0px",i._dragHelper.style.left="-1000px",i._elem.parentElement.appendChild(i._dragHelper),e.dataTransfer.setDragImage(i._dragHelper,e.offsetX,e.offsetY));var n=i._dragHandle?i._dragHandle:i._elem;i._dragEnabled?n.style.cursor=i.effectCursor?i.effectCursor:i._config.dragCursor:n.style.cursor=i._defaultCursor}}else e.preventDefault()},this._elem.ondragend=function(e){i._elem.parentElement&&i._dragHelper&&i._elem.parentElement.removeChild(i._dragHelper),i._onDragEnd(e);(i._dragHandle?i._dragHandle:i._elem).style.cursor=i._defaultCursor}}return Object.defineProperty(e.prototype,"dragEnabled",{get:function(){return this._dragEnabled},set:function(e){this._dragEnabled=!!e,this._elem.draggable=this._dragEnabled},enumerable:!0,configurable:!0}),e.prototype.setDragHandle=function(e){this._dragHandle=e},e.prototype.detectChanges=function(){var e=this;setTimeout(function(){e._cdr&&!e._cdr.destroyed&&e._cdr.detectChanges()},250)},e.prototype._onDragEnter=function(e){this._isDropAllowed(e)&&this._onDragEnterCallback(e)},e.prototype._onDragOver=function(e){this._isDropAllowed(e)&&(e.preventDefault&&e.preventDefault(),this._onDragOverCallback(e))},e.prototype._onDragLeave=function(e){this._isDropAllowed(e)&&this._onDragLeaveCallback(e)},e.prototype._onDrop=function(e){this._isDropAllowed(e)&&(this._preventAndStop(e),this._onDropCallback(e),this.detectChanges())},e.prototype._isDropAllowed=function(e){if((this._dragDropService.isDragged||e.dataTransfer&&e.dataTransfer.files)&&this.dropEnabled){if(this.allowDrop)return this.allowDrop(this._dragDropService.dragData);if(0===this.dropZones.length&&0===this._dragDropService.allowedDropZones.length)return!0;for(var t=0;t<this._dragDropService.allowedDropZones.length;t++){var r=this._dragDropService.allowedDropZones[t];if(-1!==this.dropZones.indexOf(r))return!0}}return!1},e.prototype._preventAndStop=function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},e.prototype._onDragStart=function(e){this._dragEnabled&&(this._dragDropService.allowedDropZones=this.dropZones,this._onDragStartCallback(e))},e.prototype._onDragEnd=function(e){this._dragDropService.allowedDropZones=[],this._onDragEndCallback(e)},e.prototype._onDragEnterCallback=function(e){},e.prototype._onDragOverCallback=function(e){},e.prototype._onDragLeaveCallback=function(e){},e.prototype._onDropCallback=function(e){},e.prototype._onDragStartCallback=function(e){},e.prototype._onDragEndCallback=function(e){},e}(),e.AbstractComponent=D([t.Injectable(),u("design:paramtypes",[t.ElementRef,e.DragDropService,c,t.ChangeDetectorRef])],e.AbstractComponent);var h=function(){return function(e,t,r,a,o){this._dragDropService=t,this._config=r,this._Component=a,this._cdr=o,this._elem=e.nativeElement,this._Component.setDragHandle(this._elem)}}(),m=this&&this.__decorate||function(e,t,r,a){var o,n=arguments.length,i=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(n<3?o(i):n>3?o(t,r,i):o(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i},v=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.DraggableComponent=function(e){function r(r,a,o,n){var i=e.call(this,r,a,o,n)||this;return i.onDragStart=new t.EventEmitter,i.onDragEnd=new t.EventEmitter,i.onDragSuccessCallback=new t.EventEmitter,i._defaultCursor=i._elem.style.cursor,i.dragEnabled=!0,i}return s(r,e),Object.defineProperty(r.prototype,"draggable",{set:function(e){this.dragEnabled=!!e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dropzones",{set:function(e){this.dropZones=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"effectallowed",{set:function(e){this.effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"effectcursor",{set:function(e){this.effectCursor=e},enumerable:!0,configurable:!0}),r.prototype._onDragStartCallback=function(e){this._dragDropService.isDragged=!0,this._dragDropService.dragData=this.dragData,this._dragDropService.onDragSuccessCallback=this.onDragSuccessCallback,this._elem.classList.add(this._config.onDragStartClass),this.onDragStart.emit({dragData:this.dragData,mouseEvent:e})},r.prototype._onDragEndCallback=function(e){this._dragDropService.isDragged=!1,this._dragDropService.dragData=null,this._dragDropService.onDragSuccessCallback=null,this._elem.classList.remove(this._config.onDragStartClass),this.onDragEnd.emit({dragData:this.dragData,mouseEvent:e})},r}(e.AbstractComponent),m([t.Input("dragEnabled"),v("design:type",Boolean),v("design:paramtypes",[Boolean])],e.DraggableComponent.prototype,"draggable",null),m([t.Output(),v("design:type",t.EventEmitter)],e.DraggableComponent.prototype,"onDragStart",void 0),m([t.Output(),v("design:type",t.EventEmitter)],e.DraggableComponent.prototype,"onDragEnd",void 0),m([t.Input(),v("design:type",Object)],e.DraggableComponent.prototype,"dragData",void 0),m([t.Output("onDragSuccess"),v("design:type",t.EventEmitter)],e.DraggableComponent.prototype,"onDragSuccessCallback",void 0),m([t.Input("dropZones"),v("design:type",Array),v("design:paramtypes",[Array])],e.DraggableComponent.prototype,"dropzones",null),m([t.Input("effectAllowed"),v("design:type",String),v("design:paramtypes",[String])],e.DraggableComponent.prototype,"effectallowed",null),m([t.Input("effectCursor"),v("design:type",String),v("design:paramtypes",[String])],e.DraggableComponent.prototype,"effectcursor",null),m([t.Input(),v("design:type",Object)],e.DraggableComponent.prototype,"dragImage",void 0),m([t.Input(),v("design:type",Boolean)],e.DraggableComponent.prototype,"cloneItem",void 0),e.DraggableComponent=m([t.Directive({selector:"[dnd-draggable]"}),v("design:paramtypes",[t.ElementRef,e.DragDropService,c,t.ChangeDetectorRef])],e.DraggableComponent),e.DraggableHandleComponent=function(e){function t(t,r,a,o,n){return e.call(this,t,r,a,o,n)||this}return s(t,e),t}(h),e.DraggableHandleComponent=m([t.Directive({selector:"[dnd-draggable-handle]"}),v("design:paramtypes",[t.ElementRef,e.DragDropService,c,e.DraggableComponent,t.ChangeDetectorRef])],e.DraggableHandleComponent);var _=this&&this.__decorate||function(e,t,r,a){var o,n=arguments.length,i=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(n<3?o(i):n>3?o(t,r,i):o(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i},C=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.DroppableComponent=function(e){function r(r,a,o,n){var i=e.call(this,r,a,o,n)||this;return i.onDropSuccess=new t.EventEmitter,i.onDragEnter=new t.EventEmitter,i.onDragOver=new t.EventEmitter,i.onDragLeave=new t.EventEmitter,i.dropEnabled=!0,i}return s(r,e),Object.defineProperty(r.prototype,"droppable",{set:function(e){this.dropEnabled=!!e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"allowdrop",{set:function(e){this.allowDrop=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dropzones",{set:function(e){this.dropZones=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"effectallowed",{set:function(e){this.effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"effectcursor",{set:function(e){this.effectCursor=e},enumerable:!0,configurable:!0}),r.prototype._onDragEnterCallback=function(e){this._dragDropService.isDragged&&(this._elem.classList.add(this._config.onDragEnterClass),this.onDragEnter.emit({dragData:this._dragDropService.dragData,mouseEvent:e}))},r.prototype._onDragOverCallback=function(e){this._dragDropService.isDragged&&(this._elem.classList.add(this._config.onDragOverClass),this.onDragOver.emit({dragData:this._dragDropService.dragData,mouseEvent:e}))},r.prototype._onDragLeaveCallback=function(e){this._dragDropService.isDragged&&(this._elem.classList.remove(this._config.onDragOverClass),this._elem.classList.remove(this._config.onDragEnterClass),this.onDragLeave.emit({dragData:this._dragDropService.dragData,mouseEvent:e}))},r.prototype._onDropCallback=function(e){var t=e.dataTransfer;(this._dragDropService.isDragged||t&&t.files)&&(this.onDropSuccess.emit({dragData:this._dragDropService.dragData,mouseEvent:e}),this._dragDropService.onDragSuccessCallback&&this._dragDropService.onDragSuccessCallback.emit({dragData:this._dragDropService.dragData,mouseEvent:e}),this._elem.classList.remove(this._config.onDragOverClass),this._elem.classList.remove(this._config.onDragEnterClass))},r}(e.AbstractComponent),_([t.Input("dropEnabled"),C("design:type",Boolean),C("design:paramtypes",[Boolean])],e.DroppableComponent.prototype,"droppable",null),_([t.Output(),C("design:type",t.EventEmitter)],e.DroppableComponent.prototype,"onDropSuccess",void 0),_([t.Output(),C("design:type",t.EventEmitter)],e.DroppableComponent.prototype,"onDragEnter",void 0),_([t.Output(),C("design:type",t.EventEmitter)],e.DroppableComponent.prototype,"onDragOver",void 0),_([t.Output(),C("design:type",t.EventEmitter)],e.DroppableComponent.prototype,"onDragLeave",void 0),_([t.Input("allowDrop"),C("design:type",Function),C("design:paramtypes",[Function])],e.DroppableComponent.prototype,"allowdrop",null),_([t.Input("dropZones"),C("design:type",Array),C("design:paramtypes",[Array])],e.DroppableComponent.prototype,"dropzones",null),_([t.Input("effectAllowed"),C("design:type",String),C("design:paramtypes",[String])],e.DroppableComponent.prototype,"effectallowed",null),_([t.Input("effectCursor"),C("design:type",String),C("design:paramtypes",[String])],e.DroppableComponent.prototype,"effectcursor",null),e.DroppableComponent=_([t.Directive({selector:"[dnd-droppable]"}),C("design:paramtypes",[t.ElementRef,e.DragDropService,c,t.ChangeDetectorRef])],e.DroppableComponent);var y=this&&this.__decorate||function(e,t,r,a){var o,n=arguments.length,i=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(n<3?o(i):n>3?o(t,r,i):o(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i},S=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};e.SortableContainer=function(e){function a(r,a,o,n,i){var s=e.call(this,r,a,o,n)||this;return s._sortableDataService=i,s.keepOnDrop=!1,s.enableDrop=!0,s.maxContainerSize=-1,s.onItemAddedCallback=new t.EventEmitter,s._sortableData=[],s.dragEnabled=!1,s}return s(a,e),Object.defineProperty(a.prototype,"draggable",{set:function(e){this.dragEnabled=!!e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"sortableData",{get:function(){return this._sortableData},set:function(e){this._sortableData=e,e instanceof r.FormArray?this.sortableHandler=new O:this.sortableHandler=new E,this.dropEnabled=!!this._sortableData},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dropzones",{set:function(e){this.dropZones=e},enumerable:!0,configurable:!0}),a.prototype.isHoverValid=function(e){return-1===this.maxContainerSize||e===this||this.sortableData.length<this.maxContainerSize},a.prototype._onDragEnterCallback=function(e){if(this._sortableDataService.isDragged&&this.enableDrop){var t=this._sortableDataService.sortableContainer.getItemAt(this._sortableDataService.index);-1===this.indexOf(t)&&this.isHoverValid(this._sortableDataService.sortableContainer)&&(this._sortableDataService.revertData.finalContainerRef!==this&&(this._sortableDataService.revertData.finalContainerRef=this,this._sortableDataService.revertData.finalContainerItemsCopy=Object.assign([],this._sortableDataService.revertData.finalContainerRef.sortableData)),this._sortableDataService.sortableContainer.keepOnDrop?this._sortableDataService.sortableContainer===this&&(this._sortableDataService.sortableContainer.removeItemAt(this._sortableDataService.index),0===this._sortableDataService.sortableContainer._sortableData.length&&(this._sortableDataService.sortableContainer.dropEnabled=!0)):(this._sortableDataService.sortableContainer.removeItemAt(this._sortableDataService.index),0===this._sortableDataService.sortableContainer._sortableData.length&&(this._sortableDataService.sortableContainer.dropEnabled=!0)),this.insertItemAt(t,0),this._sortableDataService.sortableContainer=this,this._sortableDataService.index=0,this.onItemAddedCallback.emit(t)),this.detectChanges()}},a.prototype.getItemAt=function(e){return this.sortableHandler.getItemAt(this._sortableData,e)},a.prototype.indexOf=function(e){return this.sortableHandler.indexOf(this._sortableData,e)},a.prototype.removeItemAt=function(e){this.sortableHandler.removeItemAt(this._sortableData,e)},a.prototype.insertItemAt=function(e,t){this.sortableHandler.insertItemAt(this._sortableData,e,t)},a.prototype.replaceItems=function(e){this.sortableHandler.replaceItems(this._sortableData,e)},a}(e.AbstractComponent),y([t.Input("dragEnabled"),S("design:type",Boolean),S("design:paramtypes",[Boolean])],e.SortableContainer.prototype,"draggable",null),y([t.Input(),S("design:type",Object),S("design:paramtypes",[Object])],e.SortableContainer.prototype,"sortableData",null),y([t.Input("dropZones"),S("design:type",Array),S("design:paramtypes",[Array])],e.SortableContainer.prototype,"dropzones",null),y([t.Input(),S("design:type",Object)],e.SortableContainer.prototype,"keepOnDrop",void 0),y([t.Input(),S("design:type",Object)],e.SortableContainer.prototype,"enableDrop",void 0),y([t.Input(),S("design:type",Object)],e.SortableContainer.prototype,"maxContainerSize",void 0),y([t.Output("onItemAdded"),S("design:type",t.EventEmitter)],e.SortableContainer.prototype,"onItemAddedCallback",void 0),e.SortableContainer=y([t.Directive({selector:"[dnd-sortable-container]"}),S("design:paramtypes",[t.ElementRef,e.DragDropService,c,t.ChangeDetectorRef,e.DragDropSortableService])],e.SortableContainer);var E=function(){function e(){}return e.prototype.getItemAt=function(e,t){return e[t]},e.prototype.indexOf=function(e,t){return e.indexOf(t)},e.prototype.removeItemAt=function(e,t){e.splice(t,1)},e.prototype.insertItemAt=function(e,t,r){e.splice(r,0,t)},e.prototype.replaceItems=function(e,t){e.splice(0,e.length);for(var r=0;r<t.length;r++){var a=t[r];this.insertItemAt(e,a,r)}},e}(),O=function(){function e(){}return e.prototype.getItemAt=function(e,t){return e.at(t)},e.prototype.indexOf=function(e,t){return e.controls.indexOf(t)},e.prototype.removeItemAt=function(e,t){e.removeAt(t)},e.prototype.insertItemAt=function(e,t,r){e.insert(r,t)},e.prototype.replaceItems=function(e,t){e.splice(0,e.length);for(var r=0;r<t.length;r++){var a=t[r];this.insertItemAt(e,a,r)}},e}();e.SortableComponent=function(e){function r(r,a,o,n,i,s){var l=e.call(this,r,a,o,s)||this;return l._sortableContainer=n,l._sortableDataService=i,l.dragEnabled=!0,l.onDragSuccessCallback=new t.EventEmitter,l.onDragStartCallback=new t.EventEmitter,l.onDragOverCallback=new t.EventEmitter,l.onDragEndCallback=new t.EventEmitter,l.onDropSuccessCallback=new t.EventEmitter,l.onDropFailedCallback=new t.EventEmitter,l.dropZones=l._sortableContainer.dropZones,l.dropEnabled=!0,l}return s(r,e),Object.defineProperty(r.prototype,"draggable",{set:function(e){this.dragEnabled=!!e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"droppable",{set:function(e){this.dropEnabled=!!e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"effectallowed",{set:function(e){this.effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"effectcursor",{set:function(e){this.effectCursor=e},enumerable:!0,configurable:!0}),r.prototype._onDragStartCallback=function(e){this._sortableDataService.isDragged=!0,this._sortableDataService.sortableContainer=this._sortableContainer,this._sortableDataService.index=this.index,this._sortableDataService.markSortable(this._elem),this._dragDropService.isDragged=!0,this._dragDropService.dragData=this.dragData,this._dragDropService.onDragSuccessCallback=this.onDragSuccessCallback,this.onDragStartCallback.emit(this._dragDropService.dragData),this._sortableDataService.revertData.initialContainerRef=this._sortableDataService.sortableContainer,this._sortableDataService.revertData.initialContainerItemsCopy=Object.assign([],this._sortableDataService.revertData.initialContainerRef.sortableData)},r.prototype._onDragOverCallback=function(e){this._sortableDataService.isDragged&&this._elem!==this._sortableDataService.elem&&(this._sortableDataService.sortableContainer=this._sortableContainer,this._sortableDataService.index=this.index,this._sortableDataService.markSortable(this._elem),this.onDragOverCallback.emit(this._dragDropService.dragData))},r.prototype._onDragEndCallback=function(e){this._sortableDataService.isDragged=!1,this._sortableDataService.sortableContainer=null,this._sortableDataService.index=null,this._sortableDataService.markSortable(null),this._dragDropService.isDragged=!1,this._dragDropService.dragData=null,this._dragDropService.onDragSuccessCallback=null,this.onDragEndCallback.emit(this._dragDropService.dragData),this._sortableDataService.revertData.initialContainerRef&&this._sortableDataService.revertData.finalContainerRef&&this.resetChanges()},r.prototype.resetChanges=function(){this._sortableDataService.revertData.initialContainerRef.replaceItems(this._sortableDataService.revertData.initialContainerItemsCopy),this._sortableDataService.revertData.finalContainerRef.replaceItems(this._sortableDataService.revertData.finalContainerItemsCopy),this._sortableDataService.revertData=new b,this.onDropFailedCallback.emit(),this.detectChanges()},r.prototype._onDragEnterCallback=function(e){if(this._sortableContainer.enableDrop&&this._sortableDataService.isDragged&&(this._sortableDataService.markSortable(this._elem),(this.index!==this._sortableDataService.index||this._sortableDataService.sortableContainer.sortableData!==this._sortableContainer.sortableData)&&this._sortableContainer.isHoverValid(this._sortableDataService.sortableContainer))){this._sortableDataService.revertData.finalContainerRef!==this._sortableContainer&&(this._sortableDataService.revertData.finalContainerRef=this._sortableContainer,this._sortableDataService.revertData.finalContainerItemsCopy=Object.assign([],this._sortableDataService.revertData.finalContainerRef.sortableData));var t=this._sortableDataService.sortableContainer.getItemAt(this._sortableDataService.index);this._sortableDataService.sortableContainer.keepOnDrop?this._sortableDataService.sortableContainer===this._sortableContainer&&(this._sortableDataService.sortableContainer.removeItemAt(this._sortableDataService.index),0===this._sortableDataService.sortableContainer.sortableData.length&&(this._sortableDataService.sortableContainer.dropEnabled=!0)):(this._sortableDataService.sortableContainer.removeItemAt(this._sortableDataService.index),0===this._sortableDataService.sortableContainer.sortableData.length&&(this._sortableDataService.sortableContainer.dropEnabled=!0)),this._sortableContainer.insertItemAt(t,this.index),this._sortableContainer.dropEnabled&&(this._sortableContainer.dropEnabled=!1),this._sortableContainer.onItemAddedCallback.emit(t),this._sortableDataService.sortableContainer=this._sortableContainer,this._sortableDataService.index=this.index,this.detectChanges()}},r.prototype._onDropCallback=function(e){this._sortableDataService.isDragged&&this._sortableContainer.isHoverValid(this._sortableDataService.sortableContainer)&&(this._sortableDataService.revertData=new b,this.onDropSuccessCallback.emit(this._dragDropService.dragData),this._dragDropService.onDragSuccessCallback&&this._dragDropService.onDragSuccessCallback.emit(this._dragDropService.dragData),this._sortableContainer.detectChanges())},r}(e.AbstractComponent),y([t.Input("sortableIndex"),S("design:type",Number)],e.SortableComponent.prototype,"index",void 0),y([t.Input("dragEnabled"),S("design:type",Boolean),S("design:paramtypes",[Boolean])],e.SortableComponent.prototype,"draggable",null),y([t.Input("dropEnabled"),S("design:type",Boolean),S("design:paramtypes",[Boolean])],e.SortableComponent.prototype,"droppable",null),y([t.Input(),S("design:type",Object)],e.SortableComponent.prototype,"dragData",void 0),y([t.Input("effectAllowed"),S("design:type",String),S("design:paramtypes",[String])],e.SortableComponent.prototype,"effectallowed",null),y([t.Input("effectCursor"),S("design:type",String),S("design:paramtypes",[String])],e.SortableComponent.prototype,"effectcursor",null),y([t.Output("onDragSuccess"),S("design:type",t.EventEmitter)],e.SortableComponent.prototype,"onDragSuccessCallback",void 0),y([t.Output("onDragStart"),S("design:type",t.EventEmitter)],e.SortableComponent.prototype,"onDragStartCallback",void 0),y([t.Output("onDragOver"),S("design:type",t.EventEmitter)],e.SortableComponent.prototype,"onDragOverCallback",void 0),y([t.Output("onDragEnd"),S("design:type",t.EventEmitter)],e.SortableComponent.prototype,"onDragEndCallback",void 0),y([t.Output("onDropSuccess"),S("design:type",t.EventEmitter)],e.SortableComponent.prototype,"onDropSuccessCallback",void 0),y([t.Output("onDropFailed"),S("design:type",t.EventEmitter)],e.SortableComponent.prototype,"onDropFailedCallback",void 0),e.SortableComponent=y([t.Directive({selector:"[dnd-sortable]"}),S("design:paramtypes",[t.ElementRef,e.DragDropService,c,e.SortableContainer,e.DragDropSortableService,t.ChangeDetectorRef])],e.SortableComponent),e.SortableHandleComponent=function(e){function t(t,r,a,o,n){return e.call(this,t,r,a,o,n)||this}return s(t,e),t}(h),e.SortableHandleComponent=y([t.Directive({selector:"[dnd-sortable-handle]"}),S("design:paramtypes",[t.ElementRef,e.DragDropService,c,e.SortableComponent,t.ChangeDetectorRef])],e.SortableHandleComponent);var I=this&&this.__decorate||function(e,t,r,a){var o,n=arguments.length,i=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(n<3?o(i):n>3?o(t,r,i):o(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i},k=[c,{provide:e.DragDropService,useFactory:n},{provide:e.DragDropSortableService,useFactory:i,deps:[c]}];e.DndModule=w=function(){function e(){}return e.forRoot=function(){return{ngModule:w,providers:k}},e}(),e.DndModule=w=I([t.NgModule({declarations:[e.DraggableComponent,e.DraggableHandleComponent,e.DroppableComponent,e.SortableContainer,e.SortableComponent,e.SortableHandleComponent],exports:[e.DraggableComponent,e.DraggableHandleComponent,e.DroppableComponent,e.SortableContainer,e.SortableComponent,e.SortableHandleComponent]})],e.DndModule);var w;e.providers=k,e.AbstractHandleComponent=h,e.DataTransferEffect=l,e.DragImage=p,e.DragDropConfig=c,e.DragDropData=f,e.dragDropServiceFactory=n,e.DragDropRevertData=b,e.dragDropSortableServiceFactory=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ng2-dnd.umd.min.js.map
